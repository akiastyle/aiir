# Apache reverse proxy for AIIR runtime
# Required modules: proxy proxy_http headers rewrite
# Enable with: a2enmod proxy proxy_http headers rewrite

<VirtualHost *:80>
    ServerName _default_

    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto expr=%{REQUEST_SCHEME}

    ProxyPass        /ai/    http://127.0.0.1:7788/ai/
    ProxyPassReverse /ai/    http://127.0.0.1:7788/ai/

    ProxyPass        /health http://127.0.0.1:7788/health
    ProxyPassReverse /health http://127.0.0.1:7788/health

    ErrorLog ${APACHE_LOG_DIR}/aiir-runtime-error.log
    CustomLog ${APACHE_LOG_DIR}/aiir-runtime-access.log combined
</VirtualHost>
